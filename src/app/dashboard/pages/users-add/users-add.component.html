<div class="component-title">
    {{isEditing ? 'Editar' : 'Adicionar'}} Usuário <b>{{isEditing ? [' - #' + usersToEdit?.id] : ''}}</b>
</div>

<div class="form-container">
    <form class="news-manager-form" [formGroup]="usersAddForm" (ngSubmit)="submitUserForm()">

        <div class="form-row">
            <div class="form-group col-sm-6">
                <div class="form-group floating-label">
                    <input formControlName="name" type="text" class="form-control" placeholder=" ">
                    <span>Nome Completo</span>
                    <!-- Validador  -->
                    <app-validators [form]="usersAddForm" [input]="f.name" [inputName]="'nome completo'" [validators]="['required','maxlength', 100]"></app-validators>
                </div>

                <div class="form-row">
                    <div class="col-sm-6 floating-label">
                        <input formControlName="cpf" type="text" class="form-control" placeholder=" ">
                        <span>CPF*</span>
                        <!-- Validador  -->
                        <app-validators [form]="usersAddForm" [input]="f.cpf" [inputName]="'cpf'" [validators]="['required']"></app-validators>
                    </div>
                    <div class="offset-sm-1 col-sm-5 floating-label">
                        <select class="custom-select form-control" formControlName="sex" required>
                            <option *ngFor="let sexOption of sexOptions" [value]="sexOption?.value"
                            placeholder=" ">{{sexOption?.info}}</option>
                        </select>
                        <span>Sexo*</span>
                    </div>
                </div>
            </div>

            <div class="form-group offset-sm-1 col-sm-4">
                <label>
                    <!-- Imagem de Perfil -->
                    <b target="_blank" *ngIf="isEditing">
                        <span *ngIf="downloadURL; else noimage">
                            <a href="{{downloadURL}}">-- Imagem Atual --</a>
                            <i class="fas fa-times" (click)="removeMainImg()" ngbTooltip="Remover imagem de perfil"></i>
                        </span>
                        <ng-template #noimage>-- Nenhuma imagem salva na notícia --</ng-template>
                    </b>
                </label>

                <div class="inner-addon right-addon">
                    <i class="fas fa-times" *ngIf="file" (click)="removeSelectedImg()" ngbTooltip="Remover imagem selecionada"></i>
                    <input #inputFile type="file" class="form-control" name="usersAvatar" accept="image/png, image/jpeg"
                        (change)="onChange($event)">
                </div>

                <div class="progress" *ngIf="inProgress">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                        [attr.aria-valuenow]="progressImg" aria-valuemin="0" aria-valuemax="100" [ngClass]="[progressImg === 100 ? 'bg-success' :'' , uploadError ? 'bg-danger' : '']"
                        [ngStyle]="{'width': progressImg + '%'}">
                        {{progressImg}}%
                    </div>
                </div>
            </div>
        </div>

        <div class="form-row">
                <div class="form-group col-sm-3 floating-label">
                    <input formControlName="cpf" type="text" class="form-control" placeholder=" ">
                    <span>Data de Nascimento*</span>
                    <!-- Validador  -->
                    <app-validators [form]="usersAddForm" [input]="f.cpf" [inputName]="'cpf'" [validators]="['required']"></app-validators>
                </div>
    
                <div class="form-group offset-sm-1 col-sm-4 floating-label">
                    <select class="custom-select form-control" formControlName="sex" required>
                        <option *ngFor="let sexOption of sexOptions" [value]="sexOption?.value">{{sexOption?.info}}</option>
                    </select>
                    <span>Escolaridade*</span>
                </div>

            <div class="form-group offset-sm-1 col-sm-3 floating-label">
                <input formControlName="birthDate" type="text" class="form-control" placeholder=" ">
                <span>Telefone*</span>
                <!-- Validador  -->
                <app-validators [form]="usersAddForm" [input]="f.birthDate" [inputName]="'data de nascimento'"
                    [validators]="['required']"></app-validators>
            </div>
        </div>

        <div class="form-row">
                <div class="form-group col-sm-3 floating-label">
                    <select class="custom-select" formControlName="role" required>
                        <option *ngFor="let roleOption of roleOptions" [value]="roleOption.value">{{roleOption?.info}}</option>
                    </select>
                    <span>Tipo de Conta*</span>
                </div>

                <div class="form-group offset-sm-1 col-sm-4 floating-label">
                    <input formControlName="cpf" type="text" class="form-control" placeholder=" ">
                    <span>Email</span>
                    <!-- Validador  -->
                    <app-validators [form]="usersAddForm" [input]="f.cpf" [inputName]="'cpf'" [validators]="['required']"></app-validators>
                </div>

    
                <div class="form-group offset-sm-1 col-sm-3 floating-label">
                    <input formControlName="cpf" type="text" class="form-control" placeholder=" ">
                    <span>Telefone Opcional</span>
                </div>    
            </div>

        <div class="form-row">
            <div class="form-group col-sm-3">
                <label>CEP*</label>
                <input type="text" class="form-control">
            </div>
            <div class="form-group col-sm-5">
                <label>Cidade*</label>
                <input type="text" class="form-control">
            </div>
            <div class="form-group col-sm-4">
                <label>Estado*</label>
                <input type="text" class="form-control">
            </div>
        </div>

        <div class="form-end">
            <span>Os campos com * são obrigatórios.</span>
            <button type="submit" class="btn btn-success" [disabled]="submitting">Cadastrar Usuário</button>
            <!-- <button type="reset" class="btn btn-info" [disabled]="submitting">Limpar Campos</button> -->
        </div>

    </form>
</div>
<!-- Modal -->
<app-modal hidden="true"></app-modal>